{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer {\n  constructor(data) {\n    this.walk(data);\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\nfunction defineReactive(target, key, value) {\n  observe(value);\n  Object.defineProperty(target, key, {\n    get() {\n      console.log(\"取值::\", value);\n      return value;\n    },\n    set(newValue) {\n      if (newValue === value) return;\n      observe(newValue);\n      console.log(\"设值::\", newValue);\n      value = newValue;\n    },\n  });\n}\n\nexport default function observe(data) {\n  if (typeof data !== \"object\" || data === null) return;\n  console.log(data);\n  return new Observer(data);\n}\n","import observe from \"./observe/index.js\";\n\nexport default function initState(vm) {\n  const { data } = vm.$options;\n  if (data) {\n    initData(vm);\n  }\n}\n\nfunction proxy(target, sourceKey, key) {\n  Object.keys(target[sourceKey]).forEach((key) => {\n    Object.defineProperty(target, key, {\n      get() {\n        return target[sourceKey][key];\n      },\n      set(newValue) {\n        target[sourceKey][key] = newValue;\n      },\n    });\n  });\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = typeof data === \"function\" ? data.call(vm) : data;\n  console.log(data);\n  vm._data = data;\n  observe(data);\n  proxy(vm, \"_data\", data);\n}\n","import initState from \"./state\";\n\nexport default function initMixins(Vue) {\n  Vue.prototype._init = function (options) {\n    // console.log(\"init\", options);\n    const vm = this;\n    Vue.$vm = vm;\n    vm.$options = options;\n    initState(vm);\n  };\n}\n","import initMixins from \"./init\";\n\nfunction Vue(options) {\n  initMixins(Vue);\n  this._init(options);\n}\n\nexport default Vue;\n"],"names":["Observer","data","_classCallCheck","walk","_createClass","key","value","Object","keys","forEach","defineReactive","target","observe","defineProperty","get","console","log","set","newValue","_typeof","initState","vm","$options","initData","proxy","sourceKey","call","_data","initMixins","Vue","prototype","_init","options","$vm"],"mappings":"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"}