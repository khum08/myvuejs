{"version":3,"file":"vue.js","sources":["../src/compiler/index.js","../src/observe/dep.js","../src/observe/scheduler.js","../src/observe/watcher.js","../src/vdom/index.js","../src/lifecycle.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["const unicodeRegExp =\n  /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\n\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst dynamicArgAttribute =\n  /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\nconst startTagClose = /^\\s*(\\/?)>/;\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\nconst doctype = /^<!DOCTYPE [^>]+>/i;\n// #7298: escape - to avoid being passed as HTML comment when inlined in page\nconst comment = /^<!\\--/;\nconst conditionalComment = /^<!\\[/;\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nconst ELEMENT_TYPE = 1;\nconst TEXT_TYPE = 3;\n\nexport const parseHTML = (html) => {\n  let index = 0;\n  function advance(step) {\n    index += step;\n    html = html.substring(step);\n  }\n\n  let stack = [];\n  let root = null;\n  let currParent;\n\n  function createASTNode(tag, attrs) {\n    return {\n      tag,\n      attrs,\n      type: ELEMENT_TYPE,\n      parent: null,\n      children: [],\n    };\n  }\n\n  function start(tag, attrs) {\n    const node = createASTNode(tag, attrs);\n    if (!root) {\n      root = node;\n      currParent = node;\n    } else {\n      node.parent = currParent;\n      currParent.children.push(node);\n      currParent = node;\n    }\n    stack.push(node);\n  }\n\n  function chars(text) {\n    text = text.replace(/\\s/g, \"\");\n    text &&\n      currParent.children.push({\n        type: TEXT_TYPE,\n        text,\n        parent: currParent,\n      });\n  }\n\n  function end(tag) {\n    stack.pop();\n    currParent = stack[stack.length - 1];\n  }\n\n  function parseStartTag() {\n    const startT = html.match(startTagOpen);\n    if (startT) {\n      const match = {\n        tagName: startT[1],\n        attrs: [],\n        start: 0,\n        end: 0,\n      };\n      advance(startT[0].length);\n      let attr, end;\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(dynamicArgAttribute) || html.match(attribute))\n      ) {\n        // console.log(end, attr);\n        attr.start = index;\n        advance(attr[0].length);\n        attr.end = index;\n        match.attrs.push(attr);\n      }\n      if (end) {\n        match.unarySlash = end[1];\n        advance(end[0].length);\n        match.end = index;\n        // console.log(match);\n        return match;\n      }\n    }\n  }\n  while (html) {\n    let textEnd = html.indexOf(\"<\");\n    // 标签\n    if (textEnd === 0) {\n      // 结束标签\n      const endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[0]);\n      }\n\n      // 开始标签\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n      }\n    }\n\n    // 文本\n    if (textEnd > 0) {\n      const text = html.substring(0, textEnd);\n      advance(text.length);\n      chars(text);\n    }\n  }\n\n  return root;\n};\n\nexport default function compileToFunction(template) {\n  console.log(template);\n\n  const ast = parseHTML(template);\n  console.log(ast);\n  const code = codegen(ast);\n  console.log(code);\n  const render = `with(this){return ${code}}`;\n  // console.log(render);\n  return new Function(render);\n}\n\nfunction genProp(attrs) {\n  let res = \"\";\n  attrs.forEach(function (item) {\n    if (item[1] === \"style\") {\n      const styleStr = item[3];\n      // console.log(styleStr);\n      let s = \"\";\n      const pairs = styleStr.split(\";\");\n      for (let i = 0; i < pairs.length - 1; i++) {\n        const kv = pairs[i].split(\":\");\n        s += `${JSON.stringify(kv[0].trim())}:${JSON.stringify(kv[1].trim())},`;\n      }\n      res += `\"style\":{${s.slice(0, -1)}},`;\n    } else {\n      res += `\"${item[1].trim()}\":\"${item[3].trim()}\",`;\n    }\n  });\n  res = res.slice(0, -1);\n  return `{${res}}`;\n}\n\nfunction gen(child) {\n  if (child.type === ELEMENT_TYPE) {\n    return codegen(child);\n  } else if (child.type === TEXT_TYPE) {\n    const text = child.text;\n    if (defaultTagRE.test(text)) {\n      let tokens = [];\n      let match;\n      let index = 0;\n      let lastIndex = (defaultTagRE.lastIndex = 0);\n      while ((match = defaultTagRE.exec(text))) {\n        index = match.index;\n        if (index > lastIndex) {\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n        }\n        tokens.push(`_s(${match[1]})`);\n        lastIndex = index + match[0].length;\n      }\n      if (lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\n      }\n      return `_v(${tokens.join(\"+\")})`;\n    } else {\n      return `_v(${JSON.stringify(text)})`;\n    }\n  }\n}\n\nfunction genChildren(children) {\n  return children.map((child) => gen(child)).join(\",\");\n}\n\n// _c('div', {'id': 'a', 'x': 1}, _c('div', {style: {\"color\": \"\"}, _v(_s(name) + \"hello\")}));\nfunction codegen(ast, res = \"\") {\n  if (ast.type === ELEMENT_TYPE) {\n    res += `_c(${JSON.stringify(ast.tag)}${\n      ast.attrs.length > 0 ? `,${genProp(ast.attrs)}` : \",null\"\n    }${ast.children.length > 0 ? `,${genChildren(ast.children)}` : \"\"})`;\n  }\n\n  if (ast.type === TEXT_TYPE) {\n    res += `_v(${JSON.stringify(ast.text)})`;\n  }\n\n  if (ast.children && ast.children.length) {\n    // codegen(ast);\n  }\n\n  return res;\n}\n","let id = 0;\nexport default class Dep {\n  constructor() {\n    this.id = id++;\n    this.subs = []; // watchers\n  }\n\n  addSub(sub) {\n    this.subs.push(sub);\n  }\n\n  depend() {\n    if (Dep.target) {\n      Dep.target.addDep(this);\n    }\n  }\n\n  notify() {\n    this.subs.forEach((sub) => sub.update());\n  }\n}\n","const queue = [];\nlet has = {};\nlet waiting = false;\nexport default function queueWatcher(watcher) {\n  if (!has[watcher.id]) {\n    queue.push(watcher);\n    has[watcher.id] = true;\n  }\n  if (!waiting) {\n    waiting = true;\n    setTimeout(() => {\n      let copies = queue.slice(0);\n      queue.length = 0;\n      has = {};\n      copies.forEach((watcher) => watcher.run());\n      waiting = false;\n    }, 0);\n  }\n}\n","import Dep from \"./dep\";\nimport queueWatcher from \"./scheduler\";\n\nlet id = 0;\nexport default class Watcher {\n  constructor(vm, expOrFn, callback) {\n    this.id = id++;\n    this.vm = vm;\n    this.getter = expOrFn; // 调用模版引擎生成虚拟dom，然后调用patch方法更新真实dom\n    this.deps = [];\n    this.depIds = new Set();\n    this.get();\n  }\n\n  get() {\n    Dep.target = this;\n    this.getter();\n    Dep.target = null;\n  }\n\n  run() {\n    this.get();\n  }\n\n  update() {\n    queueWatcher(this);\n  }\n\n  addDep(dep) {\n    const id = dep.id;\n    if (!this.depIds.has(id)) {\n      this.depIds.add(id);\n      this.deps.push(dep);\n      dep.addSub(this);\n    }\n  }\n}\n","export function vnode(tag, data, key, children, text, vm) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n    vm,\n  };\n}\n\nexport function createTextVnode(text) {\n  return vnode(undefined, undefined, undefined, undefined, text);\n}\n\nexport function createElementVNode(tag, data = {}, ...children) {\n  if (data == null) data = {};\n  return vnode(tag, data, data.key || \"\", children);\n}\n","import Watcher from \"./observe/watcher\";\nimport { createElementVNode, createTextVnode } from \"./vdom\";\n\nexport function mountComponent(vm, el) {\n  // console.log(vm._render());\n  // vm._update(vm._render());\n  const updateComponent = () => {\n    console.log(\"===== updateComponent =====\");\n    vm._update(vm._render());\n  };\n\n  new Watcher(vm, updateComponent, () => {});\n}\n\nexport function patch(oldVnode, vnode) {\n  const isRealElement = oldVnode.nodeType;\n  if (isRealElement) {\n    const oldElm = oldVnode;\n    const parentElm = oldElm.parentNode;\n    let el = createElm(vnode);\n    parentElm.insertBefore(el, oldElm.nextSibling);\n    parentElm.removeChild(oldElm);\n    return el;\n  }\n}\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    vm.$el = patch(vm.$el, vnode);\n  };\n  Vue.prototype._render = function () {\n    const vm = this;\n    const { render } = vm.$options;\n    const vnode = render.call(vm);\n    return vnode;\n  };\n\n  Vue.prototype._c = function (...args) {\n    return createElementVNode(...args);\n  };\n  Vue.prototype._v = function (text) {\n    return createTextVnode(text);\n  };\n  Vue.prototype._s = function (val) {\n    return val == null\n      ? \"\"\n      : typeof val === \"object\"\n      ? JSON.stringify(val)\n      : val;\n  };\n}\n\nexport function createElm(vnode) {\n  const { tag, data, children, text, vm } = vnode;\n  if (typeof tag === \"string\") {\n    vnode.el = document.createElement(tag);\n    // updateProperties(vnode);\n    if (data) {\n      Object.keys(data).forEach((key) => {\n        if (key === \"style\") {\n          Object.keys(data[key]).forEach((styleKey) => {\n            vnode.el.style[styleKey] = data[key][styleKey];\n          });\n        } else {\n          vnode.el.setAttribute(key, data[key]);\n        }\n      });\n    }\n    children.forEach((child) => {\n      vnode.el.appendChild(createElm(child));\n    });\n  } else {\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n","const arrayProto = Array.prototype;\n\nexport const arrayMethods = Object.create(arrayProto);\n\nconst methodsToPatch = [\n  \"push\",\n  \"pop\",\n  \"splice\",\n  \"unshift\",\n  \"shift\",\n  \"sort\",\n  \"reserve\",\n];\n\nmethodsToPatch.forEach(function (method) {\n  const original = arrayMethods[method];\n  Object.defineProperty(arrayMethods, method, {\n    value: function mutator(...args) {\n      let result = original.apply(this, args);\n      const ob = this.__ob__;\n      let inserted;\n      switch (method) {\n        case \"push\":\n        case \"unshift\":\n          inserted = args;\n          break;\n        case \"splice\":\n          inserted = args.slice(2);\n          break;\n      }\n      if (inserted) {\n        ob.observeArray(inserted);\n      }\n\n      this.__ob__.dep.notify();\n      // console.log(\"array call\", method, args, inserted);\n      return result;\n    },\n    enumerable: false,\n  });\n});\n","import { arrayMethods } from \"./array\";\nimport Dep from \"./dep\";\n\nclass Observer {\n  constructor(data) {\n    // console.log(\"Observer\", data);\n    this.dep = new Dep();\n    Object.defineProperty(data, \"__ob__\", {\n      value: this,\n      enumerable: false,\n    });\n    if (Array.isArray(data)) {\n      // 劫持数组\n      Object.getOwnPropertyNames(arrayMethods).forEach((key) => {\n        Object.defineProperty(data, key, {\n          value: arrayMethods[key],\n        });\n      });\n      this.observeArray(data);\n    } else {\n      this.walk(data);\n    }\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n\n  observeArray(data) {\n    // console.log(\"Observer\", data);\n    data.forEach((item) => {\n      //   console.log(\"Observer\", item);\n      observe(item);\n    });\n  }\n}\n\nfunction defineReactive(target, key, value) {\n  let childOb = observe(value);\n  let dep = new Dep();\n  Object.defineProperty(target, key, {\n    get() {\n      console.log(\"取值::\", value);\n      dep.depend();\n      if (childOb) {\n        childOb.dep.depend();\n      }\n      return value;\n    },\n    set(newValue) {\n      if (newValue === value) return;\n      observe(newValue);\n      console.log(\"设值::\", newValue);\n      value = newValue;\n      dep.notify();\n    },\n  });\n}\n\nexport default function observe(data) {\n  if (typeof data !== \"object\" || data === null) return;\n  if (data.__ob__) {\n    return data.__ob__;\n  }\n  //   console.log(data);\n  return new Observer(data);\n}\n","import observe from \"./observe/\";\n\nexport default function initState(vm) {\n  const { data } = vm.$options;\n  if (data) {\n    initData(vm);\n  }\n}\n\nfunction proxy(target, sourceKey, key) {\n  Object.keys(target[sourceKey]).forEach((key) => {\n    Object.defineProperty(target, key, {\n      get() {\n        return target[sourceKey][key];\n      },\n      set(newValue) {\n        target[sourceKey][key] = newValue;\n      },\n    });\n  });\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = typeof data === \"function\" ? data.call(vm) : data;\n  //   console.log(data);\n  vm._data = data;\n  observe(data);\n  proxy(vm, \"_data\", data);\n}\n","import compileToFunction from \"./compiler\";\nimport { mountComponent } from \"./lifecycle\";\nimport initState from \"./state\";\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    // console.log(\"init\", options);\n    const vm = this;\n    Vue.$vm = vm;\n    vm.$options = options;\n    initState(vm);\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n\n  Vue.prototype.$mount = function (el) {\n    let vm = this;\n    el = document.querySelector(el);\n    vm.$el = el;\n    let template = vm.$options.template;\n    if (!vm.$options.render) {\n      if (!template && el) {\n        template = el.outerHTML;\n      }\n      //   console.log(\"rendering template\", template);\n      if (template) {\n        const render = compileToFunction(template);\n        vm.$options.render = render;\n      }\n    }\n\n    mountComponent(vm, el);\n  };\n}\n","import { initMixin } from \"./init\";\nimport { lifecycleMixin } from \"./lifecycle\";\n\nfunction Vue(options) {\n  this._init(options);\n}\ninitMixin(Vue);\nlifecycleMixin(Vue);\nexport default Vue;\n"],"names":["unicodeRegExp","attribute","dynamicArgAttribute","ncname","concat","source","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","defaultTagRE","ELEMENT_TYPE","TEXT_TYPE","parseHTML","html","index","advance","step","substring","stack","root","currParent","createASTNode","tag","attrs","type","parent","children","start","node","push","chars","text","replace","end","pop","length","parseStartTag","startT","match","tagName","attr","unarySlash","textEnd","indexOf","endTagMatch","startTagMatch","compileToFunction","template","console","log","ast","code","codegen","render","Function","genProp","res","forEach","item","styleStr","s","pairs","split","i","kv","JSON","stringify","trim","slice","gen","child","test","tokens","lastIndex","exec","join","genChildren","map","arguments","undefined","id","Dep","_classCallCheck","subs","_createClass","key","value","addSub","sub","depend","target","addDep","notify","update","queue","has","waiting","queueWatcher","watcher","setTimeout","copies","run","Watcher","vm","expOrFn","callback","getter","deps","depIds","Set","get","dep","add","vnode","data","createTextVnode","createElementVNode","_len","Array","_key","mountComponent","el","updateComponent","_update","_render","patch","oldVnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","lifecycleMixin","Vue","prototype","$el","$options","call","_c","apply","_v","_s","val","_typeof","document","createElement","Object","keys","styleKey","style","setAttribute","appendChild","createTextNode","arrayProto","arrayMethods","create","methodsToPatch","method","original","defineProperty","mutator","args","result","ob","__ob__","inserted","observeArray","enumerable","Observer","isArray","getOwnPropertyNames","walk","defineReactive","observe","childOb","set","newValue","initState","initData","proxy","sourceKey","_data","initMixin","_init","options","$vm","$mount","querySelector","outerHTML"],"mappings":"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"}